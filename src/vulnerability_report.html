<!DOCTYPE html>
<html >
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>MA CCSC Map Viewer</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.polyfill.io/v2/polyfill.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">

<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <link rel="stylesheet" href="./css/vulnerability_report.css?__inline=true" media='all'>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
</head>

<body>
  <div id='ractive_root'></div>

  <!-- VIEW TEMPLATES -->
  <script id='heat_report_description' type='text/ractive'>
    <p class='lead'>
     The Commonwealth will experience more frequent heat waves in the future, and these heat waves can put vulnerable Massachusetts residents in danger. <strong>Sensitive and disadvantaged populations</strong> are disproportionally affected by higher temperatures.  Areas dominated by <strong>impervious surfaces</strong> typically experience higher temperatures than nearby areas dominated by greenspace. Building temperatures in summer can rise by <a href="https://www.researchgate.net/profile/Alfonso_Crisci/publication/322066994_Urban_Imperviousness_Effects_on_Summer_Surface_Temperatures_Nearby_Residential_Buildings_in_Different_Urban_Zones_of_Parma/links/5bb224e2299bf13e6059d993/Urban-Imperviousness-Effects-on-Summer-Surface-Temperatures-Nearby-Residential-Buildings-in-Different-Urban-Zones-of-Parma.pdf?origin=publication_detail" target="blank_">up to 1.8°F</a> for every 20% increase in impervious surface.
    </p>
  </script>
  <script id='drought_report_description' type='text/ractive'>
    <p class='lead'>
      The Commonwealth receives approximately 48 inches of rain per year on average, with average monthly rainfall between 3 and 4 inches for all regions of the state. These precipitation patterns are changing and the changes are likely to become more pronounced in the years ahead. We can expect to see more intense spring downpours, drier summers and more intermittent droughts, increased inland and coastal flooding, diminishing snowfall and higher precipitation in winter and spring months. Preparing now for these changes will help reduce a wide range of risks to Massachusetts cities and towns such as the risk of flood damage, or declining winter tourism.
    </p>
  </script>
  <script id='slr_report_description' type='text/ractive'>
    <p class='lead'>
      Climate change will drive rising sea levels, and rising seas will have wide ranging impacts for communities, natural resources, and infrastructure along the 192 miles of the Commonwealth’s coastline. Scientists estimate that on average, global sea levels have risen eight inches since 1900. This rise has made low lying coastal areas, and areas along rivers near coasts, significantly more vulnerable to coastal flooding during storms and even during daily high tides.
    </p>
  </script>
  <script id='flooding_report_description' type='text/ractive'>
    <p class='lead'>
      Of all the regions in the United States, the Northeast has seen the most dramatic increase in the intensity of rainfall events. The U.S. National Climate Assessment2 reports that between 1958 and 2010, the Northeast saw more than a 70% increase in the amount of precipitation falling in very heavy events (defined as the heaviest 1% of all daily events).  More intense downpours often lead to inland flooding as soils become saturated and stop absorbing more water, river flows rise, and urban stormwater systems become overwhelmed. Flooding may occur as a result of heavy rainfall, snowmelt or coastal flooding associated with high wind and wave action, but precipitation is the strongest driver of flooding in Massachusetts. Winter flooding is also common in the state, particularly when the ground is frozen. 
    </p>
  </script>

  <script id='report_description' type='text/ractive'>
    {{#if hazard == 'heat' }}
      {{>heat_report_description}}
    {{elseif hazard == 'drought'}}
      {{>drought_report_description}}
    {{elseif hazard == 'slr' }}
      {{>slr_report_description}}
    {{elseif hazard == 'flooding'}}
      {{>flooding_report_description}}
    {{/if hazard == 'heat' }}
  </script>

  <script id='report_graphs' type='text/ractive'>
    <div class='row'>
      <h4> Climate Projections <small> related to {{#if hazard == 'heat' }}
          Extreme Heat Hazard
          {{elseif hazard == 'drought'}}
          Drought Hazard
          {{elseif hazard == 'slr' }}
          Sea Level Rize Hazard
          {{elseif hazard == 'flooding'}}
          Inland Flooding Hazard
          {{/if hazard == 'heat' }}</h4>
    </div>
    <div class='row legend'>
      <small><svg height="10" width="20">
        <line x1="0" y1="4" x2="20" y2="4" style="stroke:green;stroke-width:4" />
      </svg>&nbsp;Moderate Emissions Scenario
      <svg height="10" width="35">
        <line x1="15" y1="4" x2="35" y2="4" style="stroke:red;stroke-width:4" />
      </svg>&nbsp;High Emissions Scenario </small>
    </div>
    <div class='row'>
       {{#charts[hazard].graphs:i}}
        <div class='col-md-{{ Math.floor(12 / charts[hazard].graphs.length) }}'>
          <canvas class='graph' id='graph_{{i}}'></canvas>
        </div>
      {{/charts[hazard].graphs}}
    </div>
  </script>

  <script id='report_header' type="text/ractive">
     <div class='page-header row'>
      <div class='container'>
        <h2>
          {{#if hazard == 'heat' }}
          Extreme Heat Hazard
          {{elseif hazard == 'drought'}}
          Drought Hazard
          {{elseif hazard == 'slr' }}
          Sea Level Rize Hazard
          {{elseif hazard == 'flooding'}}
          Inland Flooding Hazard
          {{/if hazard == 'heat' }}
          Report for {{town.name}}, MA
          <small>{{town.county}} County</small>
        </h2>
      </div>
    </div>
  </script>

  <script id='heat_town_summary' type="text/ractive">
    
     <div class='col-md-4 town-facts'>
        <h5> Extreme Heat Stats for {{town.name}}</h5>
        <h6>Physical Environment:</h6>
        <ul>
          <li> <b> {{summary.properties.canopy}}%</b> Tree canopy coverage </li>
          <li> <b> {{summary.properties.impervious}}%</b> Impervious surface</li>
        </ul>
        <h6>Population</h6>
        <ul>
          <li> <b> {{summary.properties.pct_und5}}%</b> residents are younger than 5 </li>
          <li> <b> {{summary.properties.pct_und15}}%</b> residents are younger than 15 </li>
          <li> <b> {{summary.properties.pct_over65}}%</b> residents are older than 65 </li>
          <li> <b> {{summary.properties.pnt_lvgaln}}%</b> residents live alone </li>
          <li> <b> {{summary.properties.ptovr65aln}}%</b> of residents older than 65 are living alone </li>
          <li> <b> {{summary.properties.pct_blwpov}}%</b> residents below poverty line </li>
          <li> <b> {{summary.properties.pct_ntwht}}%</b> residents are minorities </li>
          <li> <b> {{summary.properties.pctnohs_ed}}%</b> residents do not have a HS diploma</li>
        </ul>
     </div>
     <div class='col-md-8'>
         
     </div>
  </script>

  <script id='drought_town_summary' type="text/ractive">
    
      <div class='col-md-4 town-facts'>
        <h5>Drought Stats for {{town.name}}</h5>
        <h6>Ecosystems:</h6>
        <ul>
          <li> <b> {{summary.properties.vernal_pool_count}}</b> certified vernal pools </li>
        </ul>
        <h6>Agriculture</h6>
        <ul>
          <li> <b> {{summary.properties.cranberry_bog_acres}}</b> acres of cranberry bog </li>
          <li> <b> {{summary.properties.cropland_acres}}</b> acres of cropland </li>
          <li> <b> {{summary.properties.nursery_acres}}</b> acres of nursery </li>
          <li> <b> {{summary.properties.orchard_acres}}</b> acres of orchard </li>
          <li> <b> {{summary.properties.pasture_acres}}</b> acres of pasture </li>
        </ul>
     </div>
     <div class='col-md-8'>
         
     </div>
  </script>

  <script id='slr_town_summary' type="text/ractive">
     <div class='row'>
      <p>
         This is really great to know that the data is

      </p>
     </div>
  </script>

  <script id='flooding_town_summary' type="text/ractive">
     <div class='row'>
      <p>
         This is really great to know that the data is
      </p>
     </div>
  </script>

  <script id='town_summary' type='text/ractive'>
    <div class='row'>
      {{#if hazard == 'heat' }}
        {{> heat_town_summary}}
      {{elseif hazard == 'drought'}}
        {{> drought_town_summary}}
      {{elseif hazard == 'slr' }}
        {{> slr_town_summary}}
      {{elseif hazard == 'flooding'}}
        {{> stormwater_town_summary}}
      {{/if hazard == 'heat' }}
    </div>
  </script>
  <script id='vulnerability_report_template' type="text/ractive">
    <div class='container-fluid'>
      {{> report_header }}
      <div class='container'>
        {{> report_description }}
        <hr/>
        {{> report_graphs}}
        <hr/>
        {{> town_summary}}
      </div>
    </div>
  </script>

  <!-- VIEW TEMPLATES -->
  <!--[if IE]>
    <script src="https://www.promisejs.org/polyfills/promise-6.1.0.js"></script>
  <![endif]-->
  <script src="//code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src='https://unpkg.com/shpjs@latest/dist/shp.js'></script>

  <script>
    if (!console) {
      window.console = { log: function () { }, warn: function() {}, error: function () {}};
    }
  </script>

  <!-- OUR SYSTEM CODE -->

  <script src="./vendor/uri.js?__inline=true"></script>
  <script src="./vendor/colorbrewer.js?__inline=true"></script>
  <script src="./vendor/ractive.js?__inline=true"></script>
  <script src="./vendor/ractive-decorators-sortable.js?__inline=true"></script>
  <script src="./vendor/ractive-events-tap.js?__inline=true"></script>
  <script src='./vendor/ractive-tooltip.min.js?__inline=true'></script>
  <script src="./vendor/lodash.min.js?__inline=true"></script>
  <!-- THIS NEEDS TO BE FIRST -->
  <script src="./js/polyfills.js?__inline=true"></script>
  <script src="./js/vulnerability_report.js?__inline=true"></script>
</body>
</html>
