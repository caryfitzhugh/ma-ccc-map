Views.ClimateVulnerability = {
  add_layers: (map, town, features) => {
    var cp = Views.ControlPanel;
    features.forEach((feature) => {
      Controllers.Layers.add_custom_layer(cp, {"id": 'climate_vulnerability',
                                               "name": "" + town + " Climate Vulnerability - " + feature},
                                               {
                                                 "layer": {
                                                    "Stormwater Flooding": "flood",
                                                    "Sea Level Rise": 'slr',
                                                    "Extreme Heat": "extreme_heat"
                                                 }[feature],
                                                 "town": town
                                               });
    });

    // Zoom To Town...
    Controllers.Search.execute_search(town + ", MA, USA", (sstr, data) => {
      Views.ControlPanel.fire('zoom-to-search-result', {'context': data.results[0]});
    });
  }
};
